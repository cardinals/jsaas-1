/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package com.redxun.bpm.sql.manager;

import com.redxun.core.query.Page;
import com.redxun.sys.core.entity.SysInst;
import com.redxun.sys.core.manager.SysInstManager;
import com.redxun.test.BaseTestCase;
import java.text.DecimalFormat;
import java.text.NumberFormat;
import java.util.List;
import javax.annotation.Resource;
import org.junit.Test;
import org.springframework.test.annotation.Rollback;

/**
 * 
 * @author csx
 */
public class BpmSqlManagerTest extends BaseTestCase {

	@Resource
	private BpmSqlNodeManager bpmSqlNodeManager;

	@Test
	public void testInsertFormData2PhTable() {
		String jsonTable = "[{'id':'1','name':'z_cjx_form_1','text':null,'label':null,'defaultValue':null,'comment':null,'length':0,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'0','tableName':'z_cjx_form_1','type':'parentTable','columnNameNew':'z_cjx_form_1','field':'cjx_form_1','children':[{'id':'detail_1','name':'z_detail_1','text':null,'label':null,'defaultValue':null,'comment':null,'length':0,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'1','tableName':null,'type':'childTable','columnNameNew':null,'field':'detail_1','expanded':true,'_id':35,'_uid':35,'_pid':34,'_level':1},{'id':'detail_2','name':'z_detail_2','text':null,'label':null,'defaultValue':null,'comment':null,'length':0,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'1','tableName':null,'type':'childTable','columnNameNew':null,'field':'detail_2','expanded':true,'_id':36,'_uid':36,'_pid':34,'_level':1}],'expanded':true,'_id':34,'_uid':34,'_pid':-1,'_level':0,'_state':'modified'}]";
		String jsonData = "[{'id':'1','name':'z_cjx_form_1','text':null,'label':null,'defaultValue':null,'comment':null,'length':0,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'0','tableName':null,'type':'parentTable','columnNameNew':'z_cjx_form_1','field':'cjx_form_1','children':[{'id':'z_cjx_form_1_id','name':'z_cjx_form_1_id','text':null,'label':null,'defaultValue':null,'comment':'主键','length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':false,'isNullStr':null,'isPk':true,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'1','tableName':null,'type':'column','columnNameNew':null,'field':'z_cjx_form_1_id','expanded':true,'_id':20,'_uid':20,'_pid':19,'_level':1},{'id':'name1','name':'name1','text':null,'label':null,'defaultValue':null,'comment':null,'length':50,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'1','tableName':null,'type':'column','columnNameNew':null,'field':'name1','expanded':true,'_id':21,'_uid':21,'_pid':19,'_level':1},{'id':'age1','name':'age1','text':null,'label':null,'defaultValue':null,'comment':null,'length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'1','tableName':null,'type':'column','columnNameNew':null,'field':'age1','expanded':true,'_id':22,'_uid':22,'_pid':19,'_level':1},{'id':'number1','name':'number1','text':null,'label':null,'defaultValue':null,'comment':null,'length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'1','tableName':null,'type':'column','columnNameNew':null,'field':'number1','expanded':true,'_id':23,'_uid':23,'_pid':19,'_level':1},{'id':'detail_1','name':'z_detail_1','text':null,'label':null,'defaultValue':null,'comment':null,'length':0,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'1','tableName':null,'type':'childTable','columnNameNew':null,'field':'detail_1','children':[{'id':'z_detail_1_id','name':'z_detail_1_id','text':null,'label':null,'defaultValue':null,'comment':'主键','length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':false,'isNullStr':null,'isPk':true,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'detail_1','tableName':null,'type':'column','columnNameNew':null,'field':'z_detail_1_id','expanded':true,'_id':25,'_uid':25,'_pid':24,'_level':2},{'id':'z_cjx_form_1_id','name':'z_cjx_form_1_id','text':null,'label':null,'defaultValue':null,'comment':'外键','length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':true,'fkRefTable':'z_cjx_form_1','fkRefColumn':'z_cjx_form_1_id','parentId':'detail_1','tableName':null,'type':'column','columnNameNew':null,'field':'z_cjx_form_1_id','expanded':true,'_id':26,'_uid':26,'_pid':24,'_level':2},{'id':'detail_1_header_name','name':'detail_1_header_name','text':null,'label':null,'defaultValue':null,'comment':null,'length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'detail_1','tableName':null,'type':'column','columnNameNew':null,'field':'detail_1_header_name','expanded':true,'_id':27,'_uid':27,'_pid':24,'_level':2},{'id':'detail_1_header_age','name':'detail_1_header_age','text':null,'label':null,'defaultValue':null,'comment':null,'length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'detail_1','tableName':null,'type':'column','columnNameNew':null,'field':'detail_1_header_age','expanded':true,'_id':28,'_uid':28,'_pid':24,'_level':2}],'expanded':true,'_id':24,'_uid':24,'_pid':19,'_level':1},{'id':'detail_2','name':'z_detail_2','text':null,'label':null,'defaultValue':null,'comment':null,'length':0,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'1','tableName':null,'type':'childTable','columnNameNew':null,'field':'detail_2','children':[{'id':'z_detail_2_id','name':'z_detail_2_id','text':null,'label':null,'defaultValue':null,'comment':'主键','length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':false,'isNullStr':null,'isPk':true,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'detail_2','tableName':null,'type':'column','columnNameNew':null,'field':'z_detail_2_id','expanded':true,'_id':30,'_uid':30,'_pid':29,'_level':2},{'id':'z_cjx_form_1_id','name':'z_cjx_form_1_id','text':null,'label':null,'defaultValue':null,'comment':'外键','length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':true,'fkRefTable':'z_cjx_form_1','fkRefColumn':'z_cjx_form_1_id','parentId':'detail_2','tableName':null,'type':'column','columnNameNew':null,'field':'z_cjx_form_1_id','expanded':true,'_id':31,'_uid':31,'_pid':29,'_level':2},{'id':'detail_2_header_name','name':'detail_2_header_name','text':null,'label':null,'defaultValue':null,'comment':null,'length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'detail_2','tableName':null,'type':'column','columnNameNew':null,'field':'detail_2_header_name','expanded':true,'_id':32,'_uid':32,'_pid':29,'_level':2},{'id':'detail_2_header_age','name':'detail_2_header_age','text':null,'label':null,'defaultValue':null,'comment':null,'length':64,'columnDisplaySize':0,'precision':0,'scale':0,'sqlType':null,'dataType':'String','isNull':true,'isNullStr':null,'isPk':false,'isFk':false,'fkRefTable':null,'fkRefColumn':null,'parentId':'detail_2','tableName':null,'type':'column','columnNameNew':null,'field':'detail_2_header_age','expanded':true,'_id':33,'_uid':33,'_pid':29,'_level':2}],'expanded':true,'_id':29,'_uid':29,'_pid':19,'_level':1}],'expanded':true,'_id':19,'_uid':19,'_pid':-1,'_level':0,'_state':'modified'}]";
		String formJson = "{'solId':'210000000008044','actDefId':'cjx_pd_1:1:210000000008043','formViewId':'','bpmInstId':'','name1':'aa','age1':'3','number1':'1','pagesize':'10','detail_1':[{'_id':1,'_uid':1,'_state':'added','detail_1_header_name':'bb'}],'detail_2':[{'_uid':2,'detail_2_name':'cc','_id':2,'_state':'added'}],'_uid':'','detail_2_name':''}";

		String busKey = "";
		String formInstId = "";
		String nodeId = "";
		String solId = "";

		bpmSqlNodeManager.insertFormData2PhTable(busKey, formJson, formInstId, nodeId, solId);

		System.out.println("end");

	}

}
